/* Simplify Mode Styles */
/* Simplify Mode Styles */
body.context-aware-simplify {
    background-color: #f9f9f9 !important;
    overflow-x: hidden;
}

/* 
   Target the specific content container we identified 
   to enforce "Reader Mode" typography 
*/
/* Reader View Overlay */
.context-aware-reader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: #fcfcfc;
    z-index: 2147483647;
    /* Max z-index */
    overflow-y: auto;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

/* Focus Mode INSIDE Reader Overlay - when both modes active */
body.context-aware-focus .context-aware-reader-overlay {
    background-color: rgba(10, 10, 12, 0.98);
}

body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content {
    background-color: transparent;
    box-shadow: none;
}

/* Dim ALL non-highlighted content in combined mode */
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content p:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content h1:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content h2:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content h3:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content li:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content blockquote:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content img,
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content figure,
body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content .context-aware-reader-meta {
    opacity: 0.2;
    filter: blur(1.5px);
    transition: opacity 0.3s ease, filter 0.3s ease;
}

body.context-aware-focus .context-aware-reader-overlay .context-aware-reader-content .focus-mode-highlight {
    opacity: 1 !important;
    filter: none !important;
    background-color: rgba(255, 255, 255, 0.05);
    box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.05), 0 4px 20px rgba(0, 0, 0, 0.5);
    border-radius: 6px;
    color: #e2e8f0 !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* Light theme combined mode */
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light {
    background-color: rgba(255, 255, 255, 0.95);
}

body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content p:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content h1:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content h2:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content h3:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content li:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content blockquote:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content img,
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content figure {
    color: #222 !important;
    opacity: 0.4;
}

body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-light .context-aware-reader-content .focus-mode-highlight {
    color: #000 !important;
    background-color: transparent;
    text-shadow: none;
    font-weight: 500;
}

/* Sepia theme combined mode */
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-sepia {
    background-color: rgba(248, 241, 227, 0.98);
}

body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content p:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content h1:not(.focus-mode-highlight),
body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content h2:not(.focus-mode-highlight) {
    color: #4b3b28 !important;
    opacity: 0.4;
}

body.context-aware-focus .context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content .focus-mode-highlight {
    color: #4b3b28 !important;
    background-color: rgba(95, 75, 50, 0.05);
    text-shadow: none;
    font-weight: 500;
}

/* Toolbar */
.context-aware-reader-toolbar {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: auto;
    min-width: 300px;
    height: auto;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 50px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 16px;
    box-sizing: border-box;
    z-index: 2147483648;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: toolbarSlideDown 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes toolbarSlideDown {
    from {
        transform: translate(-50%, -100%);
        opacity: 0;
    }

    to {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

.context-aware-reader-controls {
    display: flex;
    gap: 8px;
    align-items: center;
}

.context-aware-reader-controls button {
    background: transparent;
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-family: sans-serif;
    font-size: 16px;
    color: #64748b;
    transition: all 0.2s;
}

.context-aware-reader-controls button:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #0f172a;
    transform: scale(1.1);
}

/* Updated Close Button */
.context-aware-reader-close {
    position: static;
    background: transparent;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    color: #64748b;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    margin-left: 12px;
}

.context-aware-reader-close:hover {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
    transform: rotate(90deg);
}

/* Content Container Adjustment */
.context-aware-reader-content {
    max-width: 740px;
    /* Slightly narrower for focus */
    margin: 100px auto 60px;
    /* Push down below toolbar */
    padding: 50px;
    background-color: white;
    /* Card look */
    box-shadow: 0 4px 25px rgba(0, 0, 0, 0.05);
    border-radius: 2px;
    min-height: calc(100vh - 160px);

    font-family: 'Georgia', 'Cambria', 'Times New Roman', serif;
    font-size: 20px;
    line-height: 1.6;
    color: #222;
}

/* List handling for Portal Pages (like Google News) */
.context-aware-reader-content ul,
.context-aware-reader-content ol {
    padding-left: 20px;
}

/* If a list item contains only a link, make it look like a story card */
.context-aware-reader-content ul li {
    margin-bottom: 0.8em;
}

.context-aware-reader-content a {
    color: #2c3e50;
    /* Dark blue/grey */
    text-decoration: none;
    border-bottom: 2px solid #e0e0e0;
    transition: border-color 0.2s;
}

.context-aware-reader-content a:hover {
    border-bottom-color: #3498db;
    color: #1a252f;
}

/* Theme: Dark */
.context-aware-reader-overlay.context-aware-theme-dark {
    background-color: #1a1a1a;
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-toolbar {
    background: rgba(30, 30, 30, 0.85);
    border-color: rgba(255, 255, 255, 0.1);
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-content {
    background-color: #242424;
    color: #dcdcdc;
    box-shadow: none;
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-close {
    color: #aaa;
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-controls button {
    color: #a3a3a3;
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-controls button:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.context-aware-reader-overlay.context-aware-theme-dark .context-aware-reader-content a {
    color: #64b5f6;
    border-bottom-color: #64b5f6;
}

/* Theme: Sepia */
.context-aware-reader-overlay.context-aware-theme-sepia {
    background-color: #f8f1e3;
}

.context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-toolbar {
    background: rgba(248, 241, 227, 0.9);
    border-color: rgba(95, 75, 50, 0.1);
}

.context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content {
    background-color: #fbf0d9;
    color: #5f4b32;
    box-shadow: none;
}

.context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-controls button {
    color: #5f4b32;
}

.context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-controls button:hover {
    background: rgba(95, 75, 50, 0.1);
}

.context-aware-reader-overlay.context-aware-theme-sepia .context-aware-reader-content a {
    color: #8a6d3b;
    border-bottom-color: #8a6d3b;
}

/* Separator styling */
.context-aware-reader-content hr {
    border: 0;
    height: 1px;
    background: #eee;
    margin: 40px 0;
}

/* Enhancements for inner content */
.context-aware-reader-content h1 {
    font-size: 2.4em;
    line-height: 1.2;
    margin-bottom: 0.5em;
    font-family: 'Helvetica Neue', 'Arial', sans-serif;
    letter-spacing: -0.02em;
}

.context-aware-reader-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 20px auto;
    border-radius: 4px;
}

.context-aware-reader-meta {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 30px;
    border-bottom: 1px solid #eee;
    padding-bottom: 20px;
}

/* Dark theme overrides for reader content */
body.context-aware-theme-dark .context-aware-simplified-content {
    background-color: #1e1e1e !important;
    color: #e0e0e0 !important;
    box-shadow: none !important;
}

body.context-aware-theme-sepia .context-aware-simplified-content {
    background-color: #fbf0d9 !important;
    color: #5f4b32 !important;
}

/* 
   Since we are NOT cloning, we need to ensure the main content 
   looks "simplified" even in its original place.
   We might need to override some of its parents' styles that might constrain it?
   For now, we just rely on hiding distractions.
*/

/* Focus Mode Styles */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Use CSS variable for opacity to allow profile customization (default 0.85) */
    --zenweb-focus-opacity: 0.85;
    background: rgba(10, 10, 12, var(--zenweb-focus-opacity));
    /* Lighter default for navigation */
    z-index: 2147483646 !important;
    /* Max safe integer - 1 */
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.6s cubic-bezier(0.22, 1, 0.36, 1), background-color 0.4s ease-out;
    backdrop-filter: blur(2px);
    /* Subtle blur for depth */
}

/* Dynamic Spotlight: Pitch black when focusing on content */
body.context-aware-focus:has(.focus-mode-highlight)::after {
    background-color: rgba(5, 5, 5, 0.98) !important;
    backdrop-filter: blur(4px);
}

body.context-aware-focus::after {
    opacity: 1;
    pointer-events: none;
    /* Keep clicks passthrough to underlying elements if needed, but visually dimmed */
}

/* Theme: Light Focus Overlay */
body.context-aware-focus.context-aware-theme-light::after {
    background: rgba(255, 255, 255, 0.9) !important;
}

body.context-aware-focus.context-aware-theme-light:has(.focus-mode-highlight)::after {
    background-color: rgba(255, 255, 255, 0.98) !important;
}

/* Ensure text is readable in Light Focus highlight */
body.context-aware-focus.context-aware-theme-light .focus-mode-highlight {
    color: #1a1a1a !important;
    text-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
}

/* Theme: Sepia Focus Overlay */
body.context-aware-focus.context-aware-theme-sepia::after {
    background: rgba(248, 241, 227, 0.9) !important;
}

body.context-aware-focus.context-aware-theme-sepia:has(.focus-mode-highlight)::after {
    background-color: rgba(248, 241, 227, 0.98) !important;
}

/* Ensure text is readable in Sepia Focus highlight */
body.context-aware-focus.context-aware-theme-sepia .focus-mode-highlight {
    color: #5f4b32 !important;
    text-shadow: 0 10px 30px rgba(95, 75, 50, 0.1) !important;
}


/* Theme: Dark Focus Overlay (Default) */
body.context-aware-focus.context-aware-theme-dark::after {
    background: rgba(10, 10, 12, 0.9) !important;
}


body.context-aware-focus input,
body.context-aware-focus textarea,
body.context-aware-focus select,
body.context-aware-focus button {
    position: relative;
    z-index: 2147483647 !important;
    /* Max safe integer */
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5), 0 0 20px rgba(59, 130, 246, 0.3);
    /* Cleaner glow */
    background-color: rgba(255, 255, 255, 1);
    transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.2s ease;
    border-radius: 6px;
    outline: none;
    /* Remove default outline as we have custom glow */
}

/* Specific subtle style for links to avoid disrupting reading */
body.context-aware-focus a,
body.context-aware-focus [role="button"] {
    position: relative;
    z-index: 2147483647 !important;
    text-shadow: 0 0 1px rgba(255, 255, 255, 0.5);
    /* Subtle glow instead of background */
    color: inherit !important;
    transition: all 0.2s ease;
}

body.context-aware-focus a:hover,
body.context-aware-focus [role="button"]:hover {
    text-shadow: 0 0 8px rgba(59, 130, 246, 0.8);
    color: #60a5fa !important;
}

body.context-aware-focus input:focus,
body.context-aware-focus textarea:focus {
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.6), 0 0 30px rgba(59, 130, 246, 0.4);
    transform: scale(1.01);
}


/* Dyslexia Friendly Font Support */
body.context-aware-dyslexia-font,
body.context-aware-dyslexia-font * {
    font-family: 'Comic Sans MS', 'Chalkboard SE', 'Verdana', sans-serif !important;
    line-height: 1.5 !important;
    letter-spacing: 0.05em !important;
}

/* Themes Support */
body.context-aware-theme-dark.context-aware-simplify {
    background-color: #1a1a1a !important;
    color: #e0e0e0 !important;
}

body.context-aware-theme-sepia.context-aware-simplify {
    background-color: #f4ecd8 !important;
    color: #5b4636 !important;
}

/* Ensure controls overlay sits nice everywhere */
/* (Styles removed as they were empty) */

/* Dark mode overrides for focused inputs */
body.context-aware-theme-dark.context-aware-focus input,
body.context-aware-theme-dark.context-aware-focus textarea {
    background-color: #333;
    color: #fff;
    border-color: #3498db;
}

/* Toast Notification for Legacy Mode */
.context-aware-toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 12px 24px;
    border-radius: 50px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 14px;
    font-weight: 500;
    z-index: 2147483647;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.context-aware-toast.show {
    opacity: 1;
}

/* Focus Timer Widget */
.zenweb-timer-widget {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding: 10px 16px;
    border-radius: 99px !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px;
    z-index: 2147483647 !important;
    /* Topmost */
    color: white !important;
    font-family: 'Inter', system-ui, sans-serif !important;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2) !important;
    animation: slideInRight 0.4s ease-out;
    /* Reset potentially conflicting styles */
    line-height: normal !important;
    text-align: left !important;
    box-sizing: border-box !important;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.timer-display {
    font-size: 16px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.05em;
    color: #60a5fa;
    /* Blue-400 */
}

.timer-controls {
    display: flex;
    gap: 6px;
}

.timer-controls button,
.timer-extra-controls button {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid transparent !important;
    cursor: pointer !important;
    border-radius: 50% !important;
    width: 28px !important;
    height: 28px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: #cbd5e1 !important;
    font-size: 12px !important;
    transition: all 0.2s !important;
    padding: 0 !important;
    margin: 0 !important;
    box-shadow: none !important;
    appearance: none !important;
    -webkit-appearance: none !important;
}

.timer-controls button:hover,
.timer-extra-controls button:hover {
    background: #3b82f6 !important;
    color: white !important;
    transform: scale(1.1);
}

/* Reading Guide (Ruler) */
.zenweb-reading-guide {
    position: fixed;
    left: 0;
    width: 100vw;
    height: 48px;
    /* Approx 3 lines height */
    background: linear-gradient(90deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 215, 0, 0.15) 20%,
            rgba(255, 215, 0, 0.15) 80%,
            rgba(255, 255, 255, 0) 100%);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
    /* Soft glow */
    border-top: 1px solid rgba(255, 215, 0, 0.2);
    border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    pointer-events: none;
    z-index: 9997;
    transform: translateY(-50%);
    display: none;
    mix-blend-mode: multiply;
}

body.context-aware-focus .zenweb-reading-guide {
    display: block;
}

/* Intelligent Paragraph Highlight */
.focus-mode-highlight {
    position: relative;
    z-index: 2147483647 !important;
    color: #cbd5e1 !important;
    /* light text for dark overlay */
    background-color: rgba(255, 255, 255, 0.05) !important;
    box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.05),
        0 4px 20px rgba(0, 0, 0, 0.5);
    border-radius: 6px;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
    transform: scale(1.01);
}

/* Make highlighted text readable on dark overlay */
body.context-aware-focus .focus-mode-highlight {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    color: #e2e8f0 !important;
}

/* New Controls for Text Size in Timer Widget */
.timer-extra-controls {
    display: flex !important;
    gap: 4px !important;
    margin-left: 8px !important;
    border-left: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding-left: 8px !important;
    align-items: center !important;
}

.text-size-btn {
    border-radius: 4px !important;
    width: auto !important;
    padding: 0 6px !important;
    font-size: 11px !important;
}

.text-size-btn:hover {
    color: white;
    background: rgba(255, 255, 255, 0.1);
}

.line-focus-btn {
    font-size: 12px;
    margin-left: 4px;
}

/* Timer Presets */
.timer-presets {
    display: flex !important;
    gap: 4px !important;
    margin-left: 8px !important;
    border-left: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding-left: 8px !important;
}

.timer-presets button {
    background: transparent !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: rgba(255, 255, 255, 0.6) !important;
    cursor: pointer !important;
    font-size: 10px !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    transition: all 0.2s !important;
    width: auto !important;
    height: auto !important;
    box-shadow: none !important;
}

.timer-presets button:hover,
.timer-presets button.active {
    background: rgba(255, 255, 255, 0.1) !important;
    color: white !important;
    border-color: #60a5fa !important;
}

/* Inline Focus Controls (when merged with Reader toolbar) */
.zenweb-focus-inline-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.zenweb-focus-inline-controls .toolbar-divider {
    width: 1px;
    height: 24px;
    background: rgba(0, 0, 0, 0.1);
    margin: 0 8px;
}

.context-aware-reader-overlay.context-aware-theme-dark .zenweb-focus-inline-controls .toolbar-divider {
    background: rgba(255, 255, 255, 0.2);
}

.zenweb-focus-inline-controls .timer-display {
    font-size: 14px;
    font-weight: 600;
    color: #3b82f6;
    font-variant-numeric: tabular-nums;
}

.zenweb-focus-inline-controls button {
    background: transparent;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 12px;
    color: #64748b;
    cursor: pointer;
    transition: all 0.2s;
}

.zenweb-focus-inline-controls button:hover {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    border-color: #3b82f6;
}

.zenweb-focus-inline-controls .timer-preset {
    font-size: 11px;
    padding: 3px 6px;
}

/* Dark theme for inline controls */
.context-aware-reader-overlay.context-aware-theme-dark .zenweb-focus-inline-controls .timer-display {
    color: #60a5fa;
}

.context-aware-reader-overlay.context-aware-theme-dark .zenweb-focus-inline-controls button {
    color: #a3a3a3;
    border-color: rgba(255, 255, 255, 0.1);
}

.context-aware-reader-overlay.context-aware-theme-dark .zenweb-focus-inline-controls button:hover {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

/* Toast Notification */
.zenweb-toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(8px);
    color: white;
    padding: 10px 20px;
    border-radius: 99px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 14px;
    font-weight: 500;
    z-index: 2147483647;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    pointer-events: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.zenweb-toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* =====================================================
   COGNITIVE PROFILE STYLES
   Profile-based accessibility enhancements
   ===================================================== */

/* CSS Custom Properties for Profile Settings */
:root {
    --zenweb-font-size: 16px;
    --zenweb-line-height: 1.5;
    --zenweb-letter-spacing: 0;
    --zenweb-word-spacing: 0;
}

/* Apply profile-based typography */
body[style*="--zenweb-font-size"] p,
body[style*="--zenweb-font-size"] li,
body[style*="--zenweb-font-size"] span,
body[style*="--zenweb-font-size"] div {
    font-size: var(--zenweb-font-size) !important;
    line-height: var(--zenweb-line-height) !important;
    letter-spacing: var(--zenweb-letter-spacing) !important;
    word-spacing: var(--zenweb-word-spacing) !important;
}

/* Dyslexia-Friendly Font (Profile-based) */
body.zenweb-dyslexia-font,
body.zenweb-dyslexia-font * {
    font-family: 'OpenDyslexic', 'Comic Sans MS', 'Verdana', sans-serif !important;
    line-height: 1.8 !important;
    letter-spacing: 0.1em !important;
    word-spacing: 0.15em !important;
}

/* High Contrast Mode */
body.zenweb-high-contrast {
    filter: contrast(1.3) !important;
}

body.zenweb-high-contrast p,
body.zenweb-high-contrast span,
body.zenweb-high-contrast div,
body.zenweb-high-contrast li {
    color: #000 !important;
    background-color: #fff !important;
}

body.zenweb-high-contrast a {
    color: #0000EE !important;
    text-decoration: underline !important;
}

body.zenweb-high-contrast img {
    filter: contrast(1.2) !important;
}

/* Muted Colors Mode (Sensory) */
body.zenweb-muted-colors {
    filter: saturate(0.5) !important;
}

body.zenweb-muted-colors * {
    transition: none !important;
    animation: none !important;
}

/* No Animations Mode */
body.zenweb-no-animations,
body.zenweb-no-animations * {
    animation: none !important;
    transition: none !important;
}

body.zenweb-no-animations *::before,
body.zenweb-no-animations *::after {
    animation: none !important;
    transition: none !important;
}

/* Auto-hide GIFs and videos when animations disabled */
body.zenweb-no-animations img[src$=".gif"],
body.zenweb-no-animations video[autoplay] {
    opacity: 0.3;
    filter: grayscale(1);
}

/* Bold Text Mode */
body.zenweb-bold-text p,
body.zenweb-bold-text span,
body.zenweb-bold-text li,
body.zenweb-bold-text div {
    font-weight: 600 !important;
}

body.zenweb-bold-text a {
    font-weight: 700 !important;
}

/* Large Cursor Mode */
body.zenweb-large-cursor,
body.zenweb-large-cursor * {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cpath d='M5 3l22 10-10 3-3 10z' fill='%23000' stroke='%23fff' stroke-width='2'/%3E%3C/svg%3E") 0 0, auto !important;
}

body.zenweb-large-cursor a,
body.zenweb-large-cursor button,
body.zenweb-large-cursor [role="button"],
body.zenweb-large-cursor input[type="submit"] {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cpath d='M10 6v20l4-4h10l-14-16z' fill='%23000' stroke='%23fff' stroke-width='2'/%3E%3C/svg%3E") 6 0, pointer !important;
}

/* Profile Active Indicator */
body[data-zenweb-profile]::before {
    content: attr(data-zenweb-profile);
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(99, 102, 241, 0.9);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    font-family: -apple-system, sans-serif;
    z-index: 2147483640;
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.3s ease;
    pointer-events: none;
}

body[data-zenweb-profile]:hover::before {
    opacity: 1;
    transform: translateX(0);
}

/* Reduce Clutter Mode - Hide distracting elements */
body.zenweb-reduce-clutter [class*="sidebar"],
body.zenweb-reduce-clutter [class*="aside"],
body.zenweb-reduce-clutter [class*="ad-"],
body.zenweb-reduce-clutter [class*="_ad"],
body.zenweb-reduce-clutter [id*="ad-"],
body.zenweb-reduce-clutter [class*="banner"],
body.zenweb-reduce-clutter [class*="popup"],
body.zenweb-reduce-clutter [class*="modal"],
body.zenweb-reduce-clutter [class*="newsletter"],
body.zenweb-reduce-clutter [class*="subscribe"],
body.zenweb-reduce-clutter [class*="social"],
body.zenweb-reduce-clutter [class*="share"],
body.zenweb-reduce-clutter [class*="related"],
body.zenweb-reduce-clutter [class*="recommend"],
body.zenweb-reduce-clutter [role="complementary"],
body.zenweb-reduce-clutter aside,
body.zenweb-reduce-clutter .ad-container,
body.zenweb-reduce-clutter iframe[src*="doubleclick"],
body.zenweb-reduce-clutter iframe[src*="ads"] {
    opacity: 0.05 !important;
    pointer-events: none !important;
    filter: grayscale(1) blur(2px) !important;
    transition: all 0.5s ease;
}

body.zenweb-reduce-clutter [class*="nav"] {
    opacity: 0.8;
    /* Dim navigation but keep usable */
}

/* =====================================================
   GLOBAL THEME SUPPORT (UNIVERSAL)
   Applies to the entire page in all modes
   ===================================================== */

/* 
   The "Nuclear" Option: 
   Force ALL elements to respect the theme unless they are media or part of our extension.
   This is necessary for complex sites with deep DOM structures and specific background colors.
*/

/* --- DARK THEME --- */
body.context-aware-theme-dark {
    background-color: #121212 !important;
    color: #e8eaed !important;
}

/* Universal Text & Border Color */
body.context-aware-theme-dark *:not([class*="context-aware"]):not([id*="zenweb"]):not(img):not(video):not(svg):not(iframe) {
    color: #e8eaed !important;
    border-color: #3c4043 !important;
    scrollbar-color: #3c4043 #121212;
}

/* Universal Background - Force Transparency 
   This makes every element transparent so the body's #121212 shows through.
   We exclude media and form inputs that might need their own backgrounds.
*/
body.context-aware-theme-dark *:not([class*="context-aware"]):not([id*="zenweb"]):not(img):not(video):not(svg):not(iframe):not(input):not(textarea):not(select):not(button):not([role="button"]) {
    background-color: transparent !important;
    background-image: none !important;
    /* Remove background patterns/gradients */
    box-shadow: none !important;
    /* Remove white shadows/glows */
}

/* Fix Inputs in Dark Mode */
body.context-aware-theme-dark input,
body.context-aware-theme-dark textarea,
body.context-aware-theme-dark select,
body.context-aware-theme-dark button {
    background-color: #1f1f1f !important;
    color: #e8eaed !important;
    border: 1px solid #3c4043 !important;
}

/* Fix Links */
body.context-aware-theme-dark a {
    color: #8ab4f8 !important;
    text-decoration-color: rgba(138, 180, 248, 0.4) !important;
}

body.context-aware-theme-dark a:visited {
    color: #c58af9 !important;
}

/* --- SEPIA THEME --- */
body.context-aware-theme-sepia {
    background-color: #f8f1e3 !important;
    color: #4b3e2f !important;
}

/* Universal Text & Border Color */
body.context-aware-theme-sepia *:not([class*="context-aware"]):not([id*="zenweb"]):not(img):not(video):not(svg):not(iframe) {
    color: #4b3e2f !important;
    border-color: #d3c4a9 !important;
    scrollbar-color: #d3c4a9 #f8f1e3;
}

/* Universal Background */
body.context-aware-theme-sepia *:not([class*="context-aware"]):not([id*="zenweb"]):not(img):not(video):not(svg):not(iframe):not(input):not(textarea):not(select):not(button):not([role="button"]) {
    background-color: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
}

/* Fix Inputs in Sepia Mode */
body.context-aware-theme-sepia input,
body.context-aware-theme-sepia textarea,
body.context-aware-theme-sepia select,
body.context-aware-theme-sepia button {
    background-color: #f1ebd8 !important;
    color: #4b3e2f !important;
    border: 1px solid #d3c4a9 !important;
}

/* Fix Links */
body.context-aware-theme-sepia a {
    color: #a05a2c !important;
}

body.context-aware-theme-sepia a:visited {
    color: #8a4b20 !important;
}

/* =====================================================
   BIONIC READING STYLES
   Bold first letters for faster reading
   ===================================================== */

.bionic-bold {
    font-weight: 700 !important;
}

/* Ensure bionic bolding works in all themes */
body.context-aware-theme-dark .bionic-bold,
body.context-aware-theme-sepia .bionic-bold,
body.context-aware-theme-light .bionic-bold {
    font-weight: 700 !important;
}

/* Global bionic reading indicator */
body.zenweb-bionic-reading .context-aware-reader-content {
    letter-spacing: 0.02em;
}

/* =====================================================
   TIME-TO-READ BADGE STYLES
   ===================================================== */

.reading-time-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
    color: #6366f1;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Inter', system-ui, sans-serif;
    border: 1px solid rgba(99, 102, 241, 0.2);
    margin-left: 12px;
    animation: badgeFadeIn 0.4s ease-out;
}

@keyframes badgeFadeIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.reading-time-badge .time-icon {
    font-size: 11px;
}

/* Theme variants for reading time badge */
.context-aware-theme-dark .reading-time-badge {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.15), rgba(167, 139, 250, 0.15));
    color: #60a5fa;
    border-color: rgba(96, 165, 250, 0.3);
}

.context-aware-theme-sepia .reading-time-badge {
    background: linear-gradient(135deg, rgba(160, 90, 44, 0.1), rgba(138, 109, 59, 0.1));
    color: #a05a2c;
    border-color: rgba(160, 90, 44, 0.2);
}