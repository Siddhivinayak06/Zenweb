<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZenWeb</title>
  <link rel="stylesheet" href="sidepanel.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet">
</head>

<body>
  <div class="app-container">

    <!-- Compact Header -->
    <header class="compact-header">
      <div class="logo-area">
        <h1>ZenWeb</h1>
        <div id="connection-status" class="status-dot-mini" title="Connection Status"></div>
      </div>
      <div class="header-actions">
        <button id="btn-settings" class="icon-btn-small" title="Settings">‚öôÔ∏è</button>
      </div>
    </header>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel hidden">
      <div class="settings-header">
        <h2>Settings</h2>
        <button id="btn-close-settings" class="close-btn">√ó</button>
      </div>
      <div class="settings-content">
        <!-- Auth Section -->
        <div class="account-card" style="padding:0; border:none; background:transparent;">
          <div id="user-logged-out">
            <p style="font-size:13px; margin-bottom:8px;">Sign in to sync your profile.</p>
            <div style="display:flex; flex-direction:column; gap:8px;">
              <input type="email" id="auth-email-input" placeholder="Email">
              <input type="password" id="auth-password-input" placeholder="Password">
              <button id="btn-login" class="action-btn">Sign In</button>
            </div>
          </div>
          <div id="user-logged-in" class="hidden">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:12px;">
              <img id="user-avatar" src="https://ui-avatars.com/api/?name=User&background=random"
                style="width:32px; height:32px; border-radius:50%; object-fit:cover;" alt="Profile">
              <div>
                <div id="user-name" style="font-weight:600;">User</div>
                <div id="user-plan-badge" class="badge">FREE</div>
              </div>
            </div>
            <button id="btn-upgrade-account" class="action-btn" style="margin-bottom:8px; background:#6366f1;">Upgrade
              to Pro</button>
            <button id="btn-logout" class="link-btn">Sign Out</button>
          </div>
        </div>

        <label>Gemini API Key</label>
        <input type="password" id="api-key-input" placeholder="Paste API Key">

        <label>Voice</label>
        <select id="voice-select">
          <option value="auto">Auto</option>
        </select>

        <button id="btn-save-settings" class="action-btn">Save</button>
        <div id="settings-status"></div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Score Strip -->
      <div class="score-strip" id="score-strip">
        <span class="score-emoji" id="score-emoji">üìä</span>
        <div class="score-info">
          <span class="score-value" id="score-value">--</span>
          <span class="score-label" id="score-label">Cognitive Load</span>
        </div>
        <button id="btn-refresh-score" class="refresh-btn-mini" title="Refresh">‚Üª</button>
      </div>

      <!-- Quick Actions Grid -->
      <div class="quick-actions">
        <button id="btn-simplify" class="quick-btn" data-mode="simplify">
          <span class="quick-icon">üìñ</span>
          <span class="quick-label">Simplify</span>
        </button>
        <button id="btn-focus" class="quick-btn" data-mode="focus">
          <span class="quick-icon">üéØ</span>
          <span class="quick-label">Focus</span>
        </button>
        <button id="btn-summarize" class="quick-btn">
          <span class="quick-icon">‚ú®</span>
          <span class="quick-label">Summ.</span>
        </button>
        <button id="btn-actions" class="quick-btn">
          <span class="quick-icon">‚òëÔ∏è</span>
          <span class="quick-label">Tasks</span>
        </button>
        <button id="btn-pause" class="quick-btn">
          <span class="quick-icon">‚è∏Ô∏è</span>
          <span class="quick-label">Pause</span>
        </button>
        <button id="btn-reset" class="quick-btn reset">
          <span class="quick-icon">‚Ü∫</span>
          <span class="quick-label">Reset</span>
        </button>
      </div>

      <!-- Collapsible Sections -->
      <div class="collapsible-sections">

        <!-- Profiles Accordion -->
        <details class="section-accordion" open>
          <summary class="accordion-header">
            <span class="accordion-icon">üë§</span>
            <span class="accordion-title">Cognitive Profiles</span>
          </summary>
          <div class="accordion-content">
            <div style="display:flex; justify-content:flex-end; margin-bottom:8px;">
              <button id="btn-clear-profile" class="link-btn">Clear</button>
            </div>
            <div class="profile-grid" id="profile-selector">
              <button class="profile-chip" data-profile="adhd">üéØ ADHD</button>
              <button class="profile-chip" data-profile="dyslexia">üìñ Dyslexia</button>
              <button class="profile-chip" data-profile="lowVision">üëÅÔ∏è Low Vision</button>
              <button class="profile-chip" data-profile="sensory">üîá Sensory</button>
              <button class="profile-chip" data-profile="custom">‚öôÔ∏è Custom</button>
            </div>
            <!-- Custom Editor -->
            <div id="custom-profile-editor" class="custom-profile-editor hidden">
              <div class="custom-editor-header">
                <h3>Custom Settings</h3>
              </div>
              <div class="custom-control-group">
                <label>Font Size</label>
                <div class="range-slider-container">
                  <input type="range" id="custom-font-size" min="10" max="32" value="16">
                  <span class="range-value">16</span>
                </div>
              </div>
              <button id="btn-save-custom" class="action-btn" style="padding:8px; font-size:12px;">Apply</button>
            </div>
          </div>
        </details>

        <!-- Appearance Accordion -->
        <details class="section-accordion">
          <summary class="accordion-header">
            <span class="accordion-icon">üé®</span>
            <span class="accordion-title">Appearance</span>
          </summary>
          <div class="accordion-content">
            <div class="setting-row">
              <span>Dyslexia Font</span>
              <label class="toggle-switch small">
                <input type="checkbox" id="check-dyslexia">
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-row">
              <span>Block Ads <span id="ads-hidden-badge" class="badge hidden">0</span></span>
              <label class="toggle-switch small">
                <input type="checkbox" id="check-adblocker" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="theme-row">
              <button class="theme-chip" data-theme="light">‚òÄÔ∏è Light</button>
              <button class="theme-chip" data-theme="sepia">‚òï Sepia</button>
              <button class="theme-chip" data-theme="dark">üåô Dark</button>
            </div>
          </div>
        </details>

        <!-- Chat -->
        <details class="section-accordion">
          <summary class="accordion-header">
            <span class="accordion-icon">üí¨</span>
            <span class="accordion-title">Chat</span>
          </summary>
          <div class="accordion-content">
            <div id="chat-messages" class="chat-messages-compact">
              <div class="chat-placeholder">Ask about this page...</div>
            </div>
            <div class="chat-input-row" style="margin-top:8px;">
              <input type="text" id="chat-input" placeholder="Type message...">
              <button id="btn-send-chat" class="send-btn-compact">‚û§</button>
            </div>
          </div>
        </details>

        <!-- Summary -->
        <details class="section-accordion" id="summary-section">
          <summary class="accordion-header">
            <span class="accordion-icon">üìù</span>
            <span class="accordion-title">Summary</span>
          </summary>
          <div class="accordion-content">
            <div id="summary-container" class="summary-compact">
              <p class="summary-placeholder">Click 'Summarize' above.</p>
            </div>
            <div class="summary-actions">
              <button id="btn-copy-summary" class="action-link">Copy</button>
              <button id="btn-clear-summary" class="action-link">Clear</button>
            </div>
          </div>
        </details>

      </div>

      <!-- Footer -->
      <footer class="compact-footer">
        <button id="btn-dashboard" class="footer-link">üìä Open Analytics Dashboard</button>
      </footer>

    </main>

    <!-- PRO ACTIONS PANEL -->
    <div id="action-panel" class="settings-panel hidden">
      <div class="settings-header">
        <h2>Action Items</h2>
        <button id="btn-close-actions" class="close-btn">√ó</button>
      </div>
      <div class="settings-content" id="action-list-container" style="flex:1; overflow-y:auto;"></div>
      <div style="padding-top:10px; display:flex; gap:8px;">
        <button id="btn-copy-actions" class="action-btn">Copy</button>
        <button id="btn-export-actions" class="action-btn" style="background:#1e293b;">Export</button>
      </div>
    </div>

  </div>
  <script type="module" src="sidepanel.js"></script>
</body>

</html>